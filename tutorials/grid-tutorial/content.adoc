= Grid-Tutorial

:type: text
:tags: Flow, Layout, Java, API, Component
:description: Learn to use the grid component in your web application and use the API efficiently according to your use case.
:repo: https://github.com/SebastianKuehnau/GridTutorial_V14
:linkattrs:
:imagesdir: ./images
:related_tutorials:

Vaadin Grid is a powerful component to show a list of data and it allows you to scroll through the data set and compose the data in a way which is most effective for you.

This tutorial will show you how to bind data from the back end to the grid and how to add columns to the component. It also shows some basic features of the grid component which will be explained more in the next articles of this series.

=== Compose Columns
The Vaadin Grid is a typed component and which brings many benefits to your development. You can instantiate it with a Type as a constructor parameter. That will scan your class and add the columns of every class field out of the box to your grid. To display the value of each field in the columns, the framework will call the ``toString`` method.
[source,java]
----
// scans Person and adds columns
Grid<Person> personGrid = new Grid<>(Person.class);
----
If you want to reorder the columns, you can call ``setColumns`` with the field names of the class to adjust the order. A nice side effect of this method is, it will only show the fields you pass as parameter. 
[source,java]
----
// Possible to reorder generated columns
personGrid.setColumns("name", "firstName");
----

==== Add Columns
If you need more flexibility regarding design and value appearance, you could also add columns via `addColumn` method. 

Basically, there are two options to add columns to the grid with the ``addColumn`` method. You could pass the field name of the bean ``addColumn("name")`` or you could provide a ``ValueProvider``and set the Getter method as a reference ``addColumn(Person::getFirstName)``.

[source,java]
----
//no constructor parameter
Grid<Person> personGrid = new Grid<>();

//added via property name
personGrid
    .addColumn("name");

//added via getter reference
personGrid
    .addColumn(Person::getFirstName);
----

If you have nested classes you could add the column with the property name  ``addColumn("address.street")``. But you need to make sure that the object is not null, otherwise it lead to an exception.

==== Column configuration

To add more configurations to the columns you could use the fluent API of the component to chain the different feature easy. 
[source,java]
----

//no constructor parameter
Grid<Person> personGrid = new Grid<>();

//add column for gender with an indivual string, enable sorting and add string to header
genderColumn = personGrid
        .addColumn(person -> person.getGender() == Person.Gender.FEMALE ? "Ms." : "Mr.")
        .setSortable(true)
        .setWidth("200px")
        .setFrozen(true)
        .setHeader(new Html("<i>Gender</i>"));
----
To get a complete overview of the functions, it is worth looking into the documentation: https://vaadin.com/docs/v14/flow/components/tutorial-flow-grid.html 

In the next chapter of this tutorial we will have a look how to use ``renderer`` in columns to display individual string like datetimes, charts or components in the way you want it.

=== Selection Mode

To select items in your grid you have two options. You could set the grid to ``SelectionMode.SINGLE`` to pick only one item or you set it to ``SelectionMode.MULTI`` to select more items.

image::singleselect.png[SingleSelect,400,200] 

image::multiselect.png[MultiSelect,400,200]

To invoke code after a selection event you could add a ``addSelectionListener`` to your grid component. You will receive the selected bean inside the event object.

[source,java]
----
personGrid.setSelectionMode(Grid.SelectionMode.SINGLE);
personGrid.addSelectionListener(selectionEvent -> {
    selectionEvent.getFirstSelectedItem().ifPresent(person -> {
        Notification.show(person.getName() " is selected");
    });
}) ;
----

With ``personGrid.asSingleSelect().getValue()`` you will get the select items straight away from the component. You could also set the selection from the outside via ``personGrid.select(item)``.


=== Binding the Data

Now we have our grid component configured and in the next step we would like to populate data in it. Therefor we could  pass the data in a ``Collection`` to our component with ``setItems``. 

This is the simplest approach to provide data to the grid, but let's have a short look how data is populated to the grid and what options are available.

To show data in the grid we would need a ``DataProvider``. This is an interface which would fetch the data from the back end and provide them to the grid component. The ``DataProvider`` can be differentiate between InMemory- and LazyLoading DataProvider. As it says, the ``InMemoryDataProvider`` keeps all the fetched data from the backend and you can filter and sort the result set. If you have a huge amount of data and it is to costly to load everything in one step, you would might use the ``LazyLoadingDataProvider``. This loads the data step by step from the back end and also filter and sort the data set. We will have a closer look into that topic in one of the next articles.    

If we call ``setItems``on the grid, it will create a ``ListDataProvider`` under the hood and populate the data to the component.

[source,java]
----
Grid<Person> personGrid = new Grid<>();

//add columns
personGrid
        .addColumn...

//fetch data from the backend
final List<Person> personList = PersonService.findAll();

//provide a list of data to the component
personGrid.setItems(personList);
//or
final ListDataProvider<Person> dataProvider = DataProvider.ofCollection(personList);
personGrid.setDataProvider(dataProvider);
----

=== Filter and Sort
If you want to filter or sort the data you can call ``setFilter`` to define a predicate to include required data and ``setSortOrder`` to define the bean field you want to sort and the direction.

[source,java]
----
dataProvider.setFilter(person -> person.getAddress() != null);
dataProvider.setSortOrder(Person::getName, SortDirection.ASCENDING);
----

These are just the simplest options to filter and sort data in the grid. There are further options to sort and filter data, for example, to combine multiple sort orders and filters or forward certain requests to the back end. We will cover this topic in one of the next article of this series.


=== Summary 

Today we learned how to create and configure a grid and its columns with the Vaadin API. We also had a short preview of how to load data into the component and what filtering and sorting options we have. We will create further articles to have a detailed look on how to render value and components inside columns, how to sort and filter them and how to use the lazy loading data provider.

If you want to spoil, you could have a look here: https://vaadin.com/docs/v14/flow/components/tutorial-flow-grid.html

Otherwise stay excited about the next article!

PS: You find the corresponding code to this article here: https://github.com/SebastianKuehnau/GridTutorial_V14/tree/part_one